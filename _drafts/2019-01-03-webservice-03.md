---
layout: post
author: "Paycis"
title: Springboot 게시판 만들기 3 - front 페이지 만들기 + 리스트 출력하기
tag: [spring]
---

이번시간에는 main페이지를 만들고 member list를 출력해보겠습니다.

* bootstrap, jquery download
* main페이지 생성
* backend에서 받아온 member list를 thymeleaf(타임리프)를 활용해서 list 출력하기

bootstrap은 전문 디자이너가 아니어도 기본적으로 제공되는 템플릿들을 잘 활용하면 괜찮은UI를 만들수 있기 때문에(개인적인 생각) 많이들 쓰는거 같습니다. 그리고 jquery는 게시글 등록,수정,삭제와 같은 이벤트를 처리하기 위해서 사용합니다.

[bootstrap site](https://getbootstrap.com/docs/4.2/getting-started/download/)에 들어가서 `Compiled CSS and JS` 파일을 down받습니다. 이 글을 쓰고있는 시점에서 최신버전은 `4.2.1`버전 입니다.
압축을 풀어보면 css폴더와 js폴더가 나오는데 우리가 사용할 파일은 `bootstrap.min.css`와 `bootstrap.min.js` 입니다.  두 파일을 복사해서 아래 경로를 만들고 붙여넣습니다. springboot는 기본적으로 `static` 디렉토리 아래를 정적라이브러리 기본경로로 사용하게 때문에 이 경로로 넣어줍니다. (별도 디렉토리로 설정 변경 가능)

![package_dir](https://willing1026.github.io/images/boot_service/lec_3/3_1_bootstrap_dir.PNG)


정상적으로 bootstrap 라이브러리가 적용되는지 확인해보겠습니다.

`src/main/resource/templates` 경로아래 `main.html`파일을 만들고 아래와 같이 코드를 작성합니다.
{% highlight html linenos %}

<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <link rel="stylesheet" href="/css/lib/bootstrap.min.css">
        
    </head>
    <body>
        
        <h1> member list page </h1>
        
        <script src="/js/lib/bootstrap.min.js"></script>
    </body>
</html>

{% endhighlight %}

`head`부분에는 적용할 css 라이브러리를 추가하고 `body`끝부분에는 `js`파일을 추가합니다. 이렇게 추가하는 이유는 코드상단부터 읽어서 처리하는데 js를 head부분에 넣을경우 로딩시간이 길어져 사용자입장에선 빈페이지를 바라봐야하는 시간이 생길 수 있습니다. 그리고 body 끝부분에 css라이브러리를 로딩할 경우 스타일이 적용한된 페이지가 보였다가 스타일이 적용되는, 사용자 입장에선 좀 불편해보이는 사이트가 됩니다.  직접 위치를 바꿔가면서 해보시면 이해가 될 것 같습니다.

여기까지 한 뒤에 app을 실행하고 `http://localhost:8080/` 으로 접속하면 `main.html`파일이 보일 것이라고 생각했으나... 에러페이지가 뜨고 404에러가 발생합니다.

그 이유는 `templates` 디렉토리 아래는 뷰 템플릿을 넣는 기본경로로 설정되어 있기 때문에 정적(static) 파일인 main.html을 넣어놔도 찾지 못합니다. 그래서 타임리프를 적용하여 main.html을 정상적으로 인식되도록 수정하겠습니다.

우선 pom.xml에 thymeleaf의 dependency를 추가합니다. 

{% highlight java linenos %}
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-thymeleaf</artifactId>
</dependency>
{% endhighlight %}

그리고 main.html을 수정합니다.

{% highlight html linenos %}
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title></title>
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <link rel="stylesheet" href="/css/lib/bootstrap.min.css">
        
    </head>
    <body>
        
        <h1> member list page </h1>
        
        <script src="/js/lib/bootstrap.min.js"></script>
    </body>
</html>
{% endhighlight %}

수정한 부분은 `<html xmlns:th="http://www.thymeleaf.org">` 이 부분입니다.
그럼 다시 실행해보면 이번에는 정상적으로 페이지가 로딩되는것을 확인할 수 있습니다.
가끔 변경한 html이 적용되지 않은경우가 있는데 이때는 패키지 우클릭 후 refresh를 해준 뒤 실행하면 잘 반영됩니다.

이제 bootstrap 템플릿이 정상반영되는지 확인해보겠습니다. 다시 부트스트랩 사이트에 접속해서 `document`로 들어가봅니다. 부트스트랩에서 지원하는 기능들과 가이드가 나와있습니다. 이 중에서 [modal](https://getbootstrap.com/docs/4.2/components/modal/) 예제를 사용해보겠습니다.

가장 첫번째 예제 코드를 main.html에 그대로 복사합니다.

{% highlight html linenos %}
...

    <body>
        
        <h1> member list page </h1>
        
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
          Launch demo modal
        </button>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                Woohoo, you're reading this text in a modal!
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>
        
        <script src="/js/lib/bootstrap.min.js"></script>
    </body>

...
{% endhighlight %}

이렇게 하면 뭔가 되는거 같으면서도 안되고 있습니다..  크롬 브라우저에서 `F12`를 눌러 개발자 도구를 보면 `console`부분에 `bootstrap.min.js`파일에서 에러가 난다는 내용을 볼 수 있습니다.  jquery가 필요한데 빠져있어서 생기는 문제입니다. (정확한 이유는 확인하고 보강하겠습니다) jquery를 다운받아서 `bootstrap.min.js` 파일이 있는 경로에 추가합니다.  그리고 아래와 같이 main.html을 수정합니다.

{% highlight html linenos %}
...

        <script src="/js/lib/jquery.min.js"></script>
        <script src="/js/lib/bootstrap.min.js"></script>
...
{% endhighlight %}

그리고 실행해보면 정상적으로 modal창이 동작합니다.


